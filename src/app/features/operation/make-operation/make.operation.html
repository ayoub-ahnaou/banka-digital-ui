<div class="max-w-xl">

  <h2 class="text-xl font-semibold mb-6">New Operation</h2>

  <!-- Operation Type -->
  <div class="flex gap-2 mb-6">
    <button
      class="px-4 py-2 text-sm rounded border"
      [class.bg-blue-600]="type() === 'DEPOSIT'"
      [class.text-white]="type() === 'DEPOSIT'"
      (click)="setType('DEPOSIT')"
    >
      Deposit
    </button>

    <button
      class="px-4 py-2 text-sm rounded border"
      [class.bg-blue-600]="type() === 'WITHDRAW'"
      [class.text-white]="type() === 'WITHDRAW'"
      (click)="setType('WITHDRAW')"
    >
      Withdraw
    </button>

    <button
      class="px-4 py-2 text-sm rounded border"
      [class.bg-blue-600]="type() === 'TRANSFER'"
      [class.text-white]="type() === 'TRANSFER'"
      (click)="setType('TRANSFER')"
    >
      Transfer
    </button>
  </div>

  <!-- Form -->
  <div class="bg-white p-6 rounded-lg border space-y-4">

    <!-- Amount -->
    <div>
      <label class="block text-xs text-gray-500 mb-1">Amount</label>
      <input
        type="number"
        class="w-full border rounded px-3 py-2 text-sm"
        [(ngModel)]="amount"
      />
    </div>

    <!-- Destination Account (Transfer only) -->
    @if (type() === 'TRANSFER') {
      <div>
        <label class="block text-xs text-gray-500 mb-1">
          Destination Account Number
        </label>
        <input
          type="text"
          class="w-full border rounded px-3 py-2 text-sm"
          [(ngModel)]="destinationAccountId"
        />
      </div>
    }

    <!-- Error -->
    @if (error()) {
      <p class="text-red-600 text-sm">
        {{ error() }}
      </p>
    }

    <!-- Submit -->
    <button
      class="w-full bg-blue-600 text-white py-2 rounded text-sm"
      (click)="submit()"
      [disabled]="loading()"
    >
      {{ loading() ? 'Processing...' : 'Confirm Operation' }}
    </button>

  </div>

</div>
